<ng-container *ngIf="data.type === 'mediaObject'">
  <div mat-dialog-title class="mat-dialog-title">
    <div class="title-container" #title_container>
      <div
        class="title"
        [class.long-title]="title_width >= title_container_width"
      >
        {{ data.name }}
        <span *ngIf="data.mediaObject.getTitle" class="media-object-title">
          - {{ data.mediaObject.getTitle }}</span
        >
      </div>
    </div>
    <div>
      <ng-container *ngIf="navigateInHeader"
        ><button
          *ngIf="data.hasNavigationInDialog"
          mat-icon-button
          class="button-before"
          (click)="onPrev()"
        >
          <mat-icon aria-label="Vorheriger Schritt">navigate_before</mat-icon>
        </button>
        <button
          *ngIf="data.hasNavigationInDialog"
          class="button-next"
          mat-icon-button
          (click)="onNext()"
        >
          <mat-icon aria-label="Nächster Schritt">navigate_next</mat-icon>
        </button>
      </ng-container>
      <button mat-icon-button mat-dialog-close>
        <mat-icon>close</mat-icon>
      </button>
    </div>
  </div>
  <ng-container
    *ngIf="data.mediaObject.deepZoomLink as dziFile; then deepZoom; else noZoom"
  ></ng-container>
  <!-- I decide to keep it bcs we maybe need it in the future -->
  <!-- <div id="description-container" *ngIf="hasDescription">
  <span markdown [data]="data.mediaObject.description"></span>
  </div> -->
  <ng-template #deepZoom>
    <div mat-dialog-content>
      <div id="dzi-container"></div>
      <ng-container *ngIf="!navigateInHeader">
        <button
          *ngIf="data.hasNavigationInDialog"
          mat-icon-button
          color="accent"
          class="button-before-mini-fab"
          (click)="onPrev()"
        >
          <mat-icon aria-label="Vorheriger Schritt">navigate_before</mat-icon>
        </button>
        <button
          *ngIf="data.hasNavigationInDialog"
          class="button-next-mini-fab"
          mat-mini-fab
          color="accent"
          (click)="onNext()"
        >
          <mat-icon aria-label="Nächster Schritt">navigate_next</mat-icon>
        </button>
      </ng-container>
      <div class="toolbar-container">
        <div class="spacer"></div>
        <solid-core-audio-toolbar
          *ngIf="hasAudio"
          [audiosrc]="data.mediaObject.audiosrc"
          [toolbar]="true"
          [class.openAudioToolbar]="audioStarted && !audioEnded && !expandLess"
          [playAudio]="audioStarted"
          (audioErrorEventEmitter)="handleAudioErrorEvent()"
          (audioEndedEventEmitter)="handleAudioEndedEvent()"
        ></solid-core-audio-toolbar>
        <div class="dialog-toolbar">
          <button
            *ngIf="hasAudio"
            (click)="onPlayClick()"
            mat-mini-fab
            color="accent"
            [disabled]="audioLoadError"
            [class.disappear]="audioStarted && !audioEnded"
          >
            <mat-icon>headphones</mat-icon>
          </button>
          <button
            *ngIf="audioStarted && expandUpDown"
            (click)="onExpand()"
            mat-mini-fab
            color="accent"
            [disabled]="audioLoadError"
          >
            <mat-icon>{{
              expandLess ? 'expand_less' : 'expand_more'
            }}</mat-icon>
          </button>
          <button
            *ngIf="audioStarted && !expandUpDown"
            (click)="onExpand()"
            mat-mini-fab
            color="accent"
            [disabled]="audioLoadError"
          >
            <mat-icon>{{
              expandLess ? 'chevron_left' : 'chevron_right'
            }}</mat-icon>
          </button>
          <solid-core-media-toolbar
            [mediaObject]="data.mediaObject"
            [hasAttributions]="true"
            [hasDialog]="false"
            [hasDziTools]="true"
            [data]="data"
            [isOverlayAboveOfDziZoomToolbar]="isOverlayAbove"
            [hasDescription]="hasDescription"
          ></solid-core-media-toolbar>
        </div>
      </div>
    </div>
  </ng-template>

  <ng-template #noZoom>
    <div mat-dialog-content>
      <div class="image">
        <img
          [src]="data.mediaObject.getRawImage('large')"
          [alt]="data.mediaObject.alt"
          [class.landscape]="data.mediaObject.isLandscape"
        />
      </div>
      <ng-container *ngIf="!navigateInHeader">
        <button
          *ngIf="data.hasNavigationInDialog"
          mat-icon-button
          color="accent"
          class="button-before-mini-fab"
          (click)="onPrev()"
        >
          <mat-icon aria-label="Vorheriger Schritt">navigate_before</mat-icon>
        </button>
        <button
          *ngIf="data.hasNavigationInDialog"
          class="button-next-mini-fab"
          mat-mini-fab
          color="accent"
          (click)="onNext()"
        >
          <mat-icon aria-label="Nächster Schritt">navigate_next</mat-icon>
        </button>
      </ng-container>
      <div class="toolbar-container">
        <div class="spacer"></div>
        <solid-core-audio-toolbar
          class="audio-toolbar"
          *ngIf="hasAudio"
          [audiosrc]="data.mediaObject.audiosrc"
          [toolbar]="true"
          [class.openAudioToolbar]="audioStarted && !audioEnded && !expandLess"
          [playAudio]="audioStarted"
          (audioErrorEventEmitter)="handleAudioErrorEvent()"
          (audioEndedEventEmitter)="handleAudioEndedEvent()"
        ></solid-core-audio-toolbar>
        <div class="dialog-toolbar">
          <button
            *ngIf="hasAudio"
            (click)="onPlayClick()"
            mat-mini-fab
            color="accent"
            [disabled]="audioLoadError"
            [class.disappear]="audioStarted && !audioEnded"
          >
            <mat-icon>headphones</mat-icon>
          </button>
          <button
            *ngIf="audioStarted && expandUpDown"
            (click)="onExpand()"
            mat-mini-fab
            color="accent"
            [disabled]="audioLoadError"
          >
            <mat-icon>{{
              expandLess ? 'expand_less' : 'expand_more'
            }}</mat-icon>
          </button>
          <button
            *ngIf="audioStarted && !expandUpDown"
            (click)="onExpand()"
            mat-mini-fab
            color="accent"
            [disabled]="audioLoadError"
          >
            <mat-icon>{{
              expandLess ? 'chevron_left' : 'chevron_right'
            }}</mat-icon>
          </button>
          <solid-core-media-toolbar
            [mediaObject]="data.mediaObject"
            [hasAttributions]="true"
            [hasDialog]="false"
            [hasDziTools]="false"
            [data]="data"
            [isOverlayAboveOfNonDziZoomToolbar]="isOverlayAbove"
            [hasDescription]="hasDescription"
            [isToolbarInDialog]="true"
          ></solid-core-media-toolbar>
        </div>
      </div>
    </div>
  </ng-template>
</ng-container>

<ng-container *ngIf="data.type === 'photograph'">
  <div mat-dialog-title class="mat-dialog-title">
    <div class="title-container" #title_container>
      <div
        class="title"
        [class.long-title]="title_width >= title_container_width"
      >
        {{ data.name }}
        <span *ngIf="data.image.getTitle" class="media-object-title">
          - {{ data.image.getTitle }}</span
        >
      </div>
    </div>
    <button mat-icon-button mat-dialog-close>
      <mat-icon>close</mat-icon>
    </button>
  </div>
  <ng-container
    *ngIf="data.image.deepZoomLink as dziFile; then deepZoom; else noZoom"
  ></ng-container>
  <ng-template #deepZoom>
    <div mat-dialog-content>
      <div id="dzi-container"></div>
      <div class="toolbar-container">
        <div class="spacer"></div>
        <solid-core-audio-toolbar
          *ngIf="hasAudio"
          [audiosrc]="data.image.audiosrc"
          [toolbar]="true"
          [class.openAudioToolbar]="audioStarted && !audioEnded && !expandLess"
          [playAudio]="audioStarted"
          (audioErrorEventEmitter)="handleAudioErrorEvent()"
          (audioEndedEventEmitter)="handleAudioEndedEvent()"
        >
        </solid-core-audio-toolbar>
        <div class="dialog-toolbar">
          <button
            *ngIf="hasAudio"
            (click)="onPlayClick()"
            mat-mini-fab
            color="accent"
            [disabled]="audioLoadError"
            [class.disappear]="audioStarted && !audioEnded"
          >
            <mat-icon>headphones</mat-icon>
          </button>
          <button
            *ngIf="audioStarted && expandUpDown"
            (click)="onExpand()"
            mat-mini-fab
            color="accent"
            [disabled]="audioLoadError"
          >
            <mat-icon>{{
              expandLess ? 'expand_less' : 'expand_more'
            }}</mat-icon>
          </button>
          <button
            *ngIf="audioStarted && !expandUpDown"
            (click)="onExpand()"
            mat-mini-fab
            color="accent"
            [disabled]="audioLoadError"
          >
            <mat-icon>{{
              expandLess ? 'chevron_left' : 'chevron_right'
            }}</mat-icon>
          </button>
          <solid-core-media-toolbar
            [image]="data.image"
            [hasAttributions]="true"
            [hasDialog]="false"
            [hasDziTools]="true"
            [data]="data"
            [isOverlayAboveOfDziZoomToolbar]="isOverlayAbove"
            [hasDescription]="hasDescription"
          ></solid-core-media-toolbar>
        </div>
      </div>
    </div>
  </ng-template>
  <ng-template #noZoom>
    <div mat-dialog-content>
      <div class="image">
        <img
          [src]="data.image.getRawImage('large')"
          [alt]="data.image.alt"
          [class.landscape]="data.image.isLandscape"
        />
      </div>
      <div class="toolbar-container">
        <solid-core-audio-toolbar
          *ngIf="hasAudio"
          [audiosrc]="data.image.audiosrc"
          [toolbar]="true"
          [class.openAudioToolbar]="audioStarted && !audioEnded && !expandLess"
          [playAudio]="audioStarted"
          (audioErrorEventEmitter)="handleAudioErrorEvent()"
          (audioEndedEventEmitter)="handleAudioEndedEvent()"
        >
        </solid-core-audio-toolbar>
        <div class="spacer"></div>
        <div class="dialog-toolbar">
          <button
            *ngIf="hasAudio"
            (click)="onPlayClick()"
            mat-mini-fab
            color="accent"
            [disabled]="audioLoadError"
            [class.disappear]="audioStarted && !audioEnded"
          >
            <mat-icon>headphones</mat-icon>
          </button>
          <button
            *ngIf="audioStarted && expandUpDown"
            (click)="onExpand()"
            mat-mini-fab
            color="accent"
            [disabled]="audioLoadError"
          >
            <mat-icon>{{
              expandLess ? 'expand_less' : 'expand_more'
            }}</mat-icon>
          </button>
          <button
            *ngIf="audioStarted && !expandUpDown"
            (click)="onExpand()"
            mat-mini-fab
            color="accent"
            [disabled]="audioLoadError"
          >
            <mat-icon>{{
              expandLess ? 'chevron_left' : 'chevron_right'
            }}</mat-icon>
          </button>
          <solid-core-media-toolbar
            [image]="data.image"
            [hasAttributions]="true"
            [hasDialog]="false"
            [hasDziTools]="false"
            [data]="data"
            [isOverlayAboveOfNonDziZoomToolbar]="isOverlayAbove"
            [hasDescription]="hasDescription"
            [isToolbarInDialog]="true"
          ></solid-core-media-toolbar>
        </div>
      </div>
    </div>
  </ng-template>
</ng-container>
