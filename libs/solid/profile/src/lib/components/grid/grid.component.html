<ng-container
  *ngFor="let profile of profiles | async; let i = index; trackBy: trackByFn"
>
  <div
    *ngIf="selectedProfileId === profile.id"
    (click)="selectProfile.emit(profile.id)"
    class="card mat-elevation-z2 selected"
    solidProfileSelected
  >
    <ng-container
      *ngTemplateOutlet="cardContent; context: { profile: profile }"
    ></ng-container>
  </div>
  <div
    *ngIf="selectedProfileId !== profile.id"
    (click)="selectProfile.emit(profile.id)"
    class="card mat-elevation-z2"
  >
    <ng-container
      *ngTemplateOutlet="cardContent; context: { profile: profile }"
    ></ng-container>
  </div>
</ng-container>

<ng-template #cardContent let-profile="profile">
  <div class="title" [innerHTML]="profile.name | profileTitle"></div>
  <div class="subtitle">{{ profile.trivial_name }}</div>
  <solid-core-media
    *ngIf="profile.mediaObjects.length > 0; else noImage"
    [mediaObject]="profile.mediaObjects[0]"
    [hasAttributions]="false"
    [hasDialog]="false"
    [view]="'grid'"
    [hasControlPanel]="false"
  ></solid-core-media>
  <ng-template #noImage>
    <img class="noimage" src="assets/profile/no_thumbnail.svg" />
  </ng-template>
</ng-template>
